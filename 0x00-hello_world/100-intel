#!/bin/bash

# Check if the CFILE variable is set
if [ -z "$CFILE" ]; then
    echo "CFILE variable is not set. Please set it to the name of your C file."
    exit 1
fi

# Check if the C file exists
if [ ! -f "$CFILE" ]; then
    echo "C file '$CFILE' does not exist."
    exit 1
fi

# Extract the base name of the C file without the extension
BASENAME=$(basename -- "$CFILE")
BASENAME="${BASENAME%.*}"

# Generate the assembly code in Intel syntax and save it to a .s file
gcc -S -masm=intel "$CFILE" -o "$BASENAME.s"

# Check if the assembly file was created
if [ -f "$BASENAME.s" ]; then
    echo "Assembly code saved to '$BASENAME.s'"
else
    echo "Failed to generate assembly code."
fi

